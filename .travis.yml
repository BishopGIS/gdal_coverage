# This is the config file for building GDAL and running its autotest suite
# with Travis-ci.org on a Mac-OSX machine

language: objective-c

# We use clang, --without-libtool and --with-debug for faster build
compiler:
  - clang

install:
  - cd gdal
  - ./configure --prefix=/usr --enable-debug --with-jpeg12 --with-python
  - make -j3
  - cd apps
  - make test_ogrsf
  - cd ..
  - sudo make install
  - sudo ldconfig
  - cd ../autotest/cpp
  - make -j3
  - cd ../../gdal

script:
# CPP unit tests
  - cd ../autotest
  - cd cpp
  - GDAL_SKIP=JP2ECW make quick_test
  - cd ..
  - cd ..
# Run all the Python autotests
  - python run_all.py

notifications:
  email:
    recipients:
      - gdal-commits@lists.osgeo.org

  irc:
    channels:
      - "irc.freenode.org#gdal"
    use_notice: true

